<!DOCTYPE html>

<head>
<Title>Cash Counter</Title>
<link rel="stylesheet" href="main.css">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<script src="math.js"></script>

<script>
    function fromQty(expression,denomination) {
        if (denomination.substring(0,1) == "c") {
            return math.evaluate(expression) * (denomination.substring(1) / 100)
        } else {
        return math.evaluate(expression) * denomination.substring(1)
        }
    }
    function fromAmt(expression,denomination) {
        return math.evaluate(expression)
    }
    function getTotal(denomination) {
        quantity = fromQty(document.getElementById(denomination + "_qty").value,denomination)
        amount = fromAmt(document.getElementById(denomination + "_amt").value,denomination)
        total = isNaN(quantity) ? 0 : quantity
        total = isNaN(amount) ? total : total + amount
        document.getElementById(denomination + "_tot").innerText = "$" + total
        billsTotal()
        coinsTotal()
        finalTotal()
    }
    function billsTotal() {
       total = Number(document.getElementById("d100_tot").innerText.replace(/\D/g,''))
        total += Number(document.getElementById("d50_tot").innerText.replace(/\D/g,''))
        total += Number(document.getElementById("d20_tot").innerText.replace(/\D/g,''))
        total += Number(document.getElementById("d10_tot").innerText.replace(/\D/g,''))
        total += Number(document.getElementById("d5_tot").innerText.replace(/\D/g,''))
        total += Number(document.getElementById("d2_tot").innerText.replace(/\D/g,''))
        total += Number(document.getElementById("d1_tot").innerText.replace(/\D/g,''))
        document.getElementById("bill_total").innerText = "$" + total
    }
    function coinsTotal() {
       total = Number(document.getElementById("c100_tot").innerText.replace(/\D/g,''))
        total += Number(document.getElementById("c50_tot").innerText.replace(/\D/g,''))
        total += Number(document.getElementById("c25_tot").innerText.replace(/\D/g,''))
        total += Number(document.getElementById("c10_tot").innerText.replace(/\D/g,''))
        total += Number(document.getElementById("c05_tot").innerText.replace(/\D/g,''))
        total += Number(document.getElementById("c01_tot").innerText.replace(/\D/g,''))
        document.getElementById("coin_total").innerText = "$" + total
    }
    function finalTotal() {
        total = Number(document.getElementById("bill_total").innerText.replace(/\D/g,''))
        total += Number(document.getElementById("coin_total").innerText.replace(/\D/g,''))
        document.getElementById("final_total").innerText = "$" + total
    }
</script>

<body>

    <table>
        <tr>
            <th>Quantity</th>
            <th>Denomination</th>
            <th>Amount</th>
            <th>Totals</th>
        </tr>
        <tr>
            <td><input id="d100_qty" type="text" size=10 onChange="getTotal('d100')"></td>
            <td>Hundreds</td>
            <td><input id="d100_amt" type="text" size=10 onChange="getTotal('d100')"></td>
            <td><label id="d100_tot"></label></td>
        </tr>
        <tr>
            <td><input id="d50_qty" type="text" size=10 onChange="getTotal('d50')"></td>
            <td>Fifties</td>
            <td><input id="d50_amt" type="text" size=10 onChange="getTotal('d50')"></td>
            <td><label id="d50_tot"></label></td>
        </tr>
        <tr>
            <td><input id="d20_qty" type="text" size=10 onChange="getTotal('d20')"></td>
            <td>Twenties</td>
            <td><input id="d20_amt" type="text" size=10 onChange="getTotal('d20')"></td>
            <td><label id="d20_tot"></label></td>
        </tr>
        <tr>
            <td><input id="d10_qty" type="text" size=10 onChange="getTotal('d10')"></td>
            <td>Tens</td>
            <td><input id="d10_amt" type="text" size=10 onChange="getTotal('d10')"></td>
            <td><label id="d10_tot"></label></td>
        </tr>
        <tr>
            <td><input id="d5_qty" type="text" size=10 onChange="getTotal('d5')"></td>
            <td>Fives</td>
            <td><input id="d5_amt" type="text" size=10 onChange="getTotal('d5')"></td>
            <td><label id="d5_tot"></label></td>
        </tr>
        <tr>
            <td><input id="d2_qty" type="text" size=10 onChange="getTotal('d2')"></td>
            <td>Twos</td>
            <td><input id="d2_amt" type="text" size=10 onChange="getTotal('d2')"></td>
            <td><label id="d2_tot"></label></td>
        </tr>
        <tr>
            <td><input id="d1_qty" type="text" size=10 onChange="getTotal('d1')"></td>
            <td>Ones</td>
            <td><input id="d1_amt" type="text" size=10 onChange="getTotal('d1')"></td>
            <td><label id="d1_tot"></label></td>
        </tr>
        <tr>
            <td></td>
            <td>Total:</td>
            <td><label id="bill_total"></label></td>
        </tr>
        <tr>
            <td>Coins</td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td><input id="c100_qty" type="text" size=10 onChange="getTotal('c100')"></td>
            <td>Dollar Coin</td>
            <td><input id="c100_amt" type="text" size=10 onChange="getTotal('c100')"></td>
            <td><label id="c100_tot"></label></td>
        </tr>
        <tr>
            <td><input id="c50_qty" type="text" size=10 onChange="getTotal('c50')"></td>
            <td>Half Dollar</td>
            <td><input id="c50_amt" type="text" size=10 onChange="getTotal('c50')"></td>
            <td><label id="c50_tot"></label></td>
        </tr>
        <tr>
            <td><input id="c25_qty" type="text" size=10 onChange="getTotal('c25')"></td>
            <td>Quarters</td>
            <td><input id="c25_amt" type="text" size=10 onChange="getTotal('c25')"></td>
            <td><label id="c25_tot"></label></td>
        </tr>
        <tr>
            <td><input id="c10_qty" type="text" size=10 onChange="getTotal('c10')"></td>
            <td>Dimes</td>
            <td><input id="c10_amt" type="text" size=10 onChange="getTotal('c10')"></td>
            <td><label id="c10_tot"></label></td>
        </tr>
        <tr>
            <td><input id="c05_qty" type="text" size=10 onChange="getTotal('c05')"></td>
            <td>Nickels</td>
            <td><input id="c05_amt" type="text" size=10 onChange="getTotal('c05')"></td>
            <td><label id="c05_tot"></label></td>
        </tr>
        <tr>
            <td><input id="c01_qty" type="text" size=10 onChange="getTotal('c01')"></td>
            <td>Pennies</td>
            <td><input id="c01_amt" type="text" size=10 onChange="getTotal('c01')"></td>
            <td><label id="c01_tot"></label></td>
        </tr>
        <tr>
            <td></td>
            <td>Total:</td>
            <td><label id="coin_total"></label></td>
        </tr>
        <tr>
            <td></td>
            <td>Final Total:</td>
            <td><label id="final_total"></label></td>
        </tr>
    </table>

</body>
